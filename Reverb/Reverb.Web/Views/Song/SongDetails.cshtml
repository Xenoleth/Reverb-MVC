@using Reverb.Web.Models.Song
@model SongViewModel

@* 
    Render image as background
    Render video
*@

<div class="details">
    <p>Title</p>
    <p><b>@Model.Title</b></p>
    <p>Album</p>
    <p>@Model.Album</p>
    <p>Artist</p>
    <p>@Model.Artist</p>
    <p>Duration</p>
    @if (Model.Duration != null)
    {
        @(String.Format("{0}:{1:00} min", (int)Model.Duration / 60, (int)Model.Duration % 60))
    }
    else
    {
        <p>Unknown</p>
    }

    @if (!User.Identity.IsAuthenticated)
    {

    }
    else if (!Model.Users.Contains(User.Identity.Name))
    {
        using (Ajax.BeginForm(
                "AddToFavorites",
                "Song",
                new { songId = Model.Id },
                new AjaxOptions
                {
                    HttpMethod = "POST"
                }))
        {
            <input type="submit" class="btn btn-primary" value="Favorite" />
        }
    }
    else if (Model.Users.Contains(User.Identity.Name))
    {
        using (Ajax.BeginForm(
                        "RemoveFromFavorites",
                        "Song",
                        new { songId = Model.Id },
                        new AjaxOptions
                        {
                            HttpMethod = "POST"
                        }))
        {
            <input type="submit" class="btn btn-primary" value="Unfavorite" />
        }
    }

    @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
    {
        @Html.ActionLink("Edit", "EditSong", "Song", new { songId = Model.Id }, new { @class = "btn btn-warning" })
    }

    @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
    {
        using (Html.BeginForm("DeleteSong", "Song", new { songId = Model.Id }, FormMethod.Post))
        {
            <input type="submit" class="btn btn-danger" value="Delete" />
        }
    }
</div>

<div class="lyrics">
    <p>Lyrics</p>
    <p>@Model.Lyrics</p>
</div>

